<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/AndroidManifest.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/AndroidManifest.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;&#10;&#10;    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;&#10;    &lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_IMAGES&quot; /&gt;&#10;&#10;    &lt;application&#10;        android:allowBackup=&quot;true&quot;&#10;        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;&#10;        android:fullBackupContent=&quot;@xml/backup_rules&quot;&#10;        android:icon=&quot;@mipmap/ic_launcher&quot;&#10;        android:label=&quot;@string/app_name&quot;&#10;        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;&#10;        android:supportsRtl=&quot;true&quot;&#10;        android:theme=&quot;@style/Theme.Fitness&quot;&#10;        tools:targetApi=&quot;31&quot;&gt;&#10;        &lt;activity&#10;            android:name=&quot;.activities.ExcerciseActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.activities.RegisterActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.activities.DashboardActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.activities.LoginActivity&quot;&#10;            android:exported=&quot;true&quot;&gt;&#10;            &lt;intent-filter&gt;&#10;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;&#10;&#10;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&#10;            &lt;/intent-filter&gt;&#10;        &lt;/activity&gt;&#10;    &lt;/application&gt;&#10;&#10;&lt;/manifest&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;&#10;&#10;    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;&#10;    &lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_IMAGES&quot; /&gt;&#10;    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;&#10;&#10;    &lt;application&#10;        android:allowBackup=&quot;true&quot;&#10;        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;&#10;        android:fullBackupContent=&quot;@xml/backup_rules&quot;&#10;        android:icon=&quot;@mipmap/ic_launcher&quot;&#10;        android:label=&quot;@string/app_name&quot;&#10;        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;&#10;        android:supportsRtl=&quot;true&quot;&#10;        android:theme=&quot;@style/Theme.Fitness&quot;&#10;        tools:targetApi=&quot;31&quot;&gt;&#10;        &lt;activity&#10;            android:name=&quot;.activities.EditExerciseActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.activities.ExcerciseActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.activities.RegisterActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.activities.DashboardActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.activities.LoginActivity&quot;&#10;            android:exported=&quot;true&quot;&gt;&#10;            &lt;intent-filter&gt;&#10;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;&#10;&#10;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&#10;            &lt;/intent-filter&gt;&#10;        &lt;/activity&gt;&#10;    &lt;/application&gt;&#10;&#10;&lt;/manifest&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/ba/sum/fsre/fitness/activities/DashboardActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/ba/sum/fsre/fitness/activities/DashboardActivity.java" />
              <option name="originalContent" value="package ba.sum.fsre.fitness.activities;&#10;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.util.Log;&#10;import android.view.View;&#10;import android.widget.Button;&#10;import android.widget.ImageView;&#10;import android.widget.ListView;&#10;import android.widget.ProgressBar;&#10;import android.widget.SimpleAdapter;&#10;import android.widget.Toast;&#10;&#10;import com.squareup.picasso.Picasso;&#10;&#10;import java.util.ArrayList;&#10;import java.util.HashMap;&#10;import java.util.List;&#10;&#10;import ba.sum.fsre.fitness.R;&#10;import ba.sum.fsre.fitness.api.RetrofitClient;&#10;import ba.sum.fsre.fitness.models.Excercise;&#10;import ba.sum.fsre.fitness.utils.AuthManager;&#10;import retrofit2.Call;&#10;import retrofit2.Callback;&#10;import retrofit2.Response;&#10;&#10;public class DashboardActivity extends AppCompatActivity {&#10;&#10;    AuthManager authManager;&#10;    Button logoutBtn;&#10;    Button addExcerciseBtn;&#10;&#10;    ProgressBar workoutProgress;&#10;&#10;    ListView workoutListView;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_dashboard);&#10;&#10;        authManager = new AuthManager(this);&#10;&#10;        // initialize UI first so buttons are ready even if network is slow&#10;        initViews();&#10;        setupListeners();&#10;&#10;        this.workoutProgress.setVisibility(View.VISIBLE);&#10;&#10;        // Use Bearer &lt;token&gt; for Authorization (Supabase expects Bearer token)&#10;        String rawToken = authManager.getToken();&#10;        String token = rawToken != null ? &quot;Bearer &quot; + rawToken : null;&#10;&#10;        Log.d(&quot;DashboardActivity&quot;, &quot;Using token: &quot; + (rawToken != null ? &quot;[REDACTED]&quot; : &quot;null&quot;));&#10;&#10;        if (token == null) {&#10;            Toast.makeText(DashboardActivity.this, &quot;Niste prijavljeni. Prijavite se ponovo.&quot;, Toast.LENGTH_LONG).show();&#10;            this.workoutProgress.setVisibility(View.INVISIBLE);&#10;            return;&#10;        }&#10;&#10;        RetrofitClient&#10;            .getInstance()&#10;            .getApi()&#10;            .getAll(token).enqueue(new Callback&lt;List&lt;Excercise&gt;&gt;() {&#10;                    @Override&#10;                    public void onResponse(Call&lt;List&lt;Excercise&gt;&gt; call, Response&lt;List&lt;Excercise&gt;&gt; response) {&#10;                        Log.d(&quot;DashboardActivity&quot;, &quot;API onResponse code=&quot; + response.code());&#10;&#10;                        if (!response.isSuccessful()) {&#10;                            String err = &quot;Server error: &quot; + response.code();&#10;                            try {&#10;                                if (response.errorBody() != null) err += &quot; - &quot; + response.errorBody().string();&#10;                            } catch (Exception ex) {&#10;                                Log.e(&quot;DashboardActivity&quot;, &quot;Error reading errorBody&quot;, ex);&#10;                            }&#10;                            Toast.makeText(DashboardActivity.this, err, Toast.LENGTH_LONG).show();&#10;                            workoutProgress.setVisibility(View.INVISIBLE);&#10;                            return;&#10;                        }&#10;&#10;                        List&lt;Excercise&gt; excerciseList = response.body();&#10;                        if (excerciseList == null) {&#10;                            Toast.makeText(DashboardActivity.this, &quot;Nema podataka (response body je null)&quot;, Toast.LENGTH_LONG).show();&#10;                            workoutProgress.setVisibility(View.INVISIBLE);&#10;                            return;&#10;                        }&#10;&#10;                        List&lt;HashMap&lt;String, String&gt;&gt; data = new ArrayList&lt;&gt;();&#10;&#10;                        for (Excercise e : excerciseList) {&#10;                            HashMap&lt;String, String&gt; item = new HashMap&lt;&gt;();&#10;                            item.put(&quot;name&quot;, e.getName());&#10;                            item.put(&quot;description&quot;, e.getDescription());&#10;                            item.put(&quot;image&quot;, e.getImageUrl());&#10;                            data.add(item);&#10;                        }&#10;&#10;                        String [] from = {&quot;name&quot;, &quot;description&quot;, &quot;image&quot;};&#10;                        int [] to = {R.id.textView2, R.id.textView3, R.id.itemImage};&#10;&#10;                        SimpleAdapter adapter = new SimpleAdapter(&#10;                                DashboardActivity.this,&#10;                                data, R.layout.listview_item,&#10;                                from, to&#10;                        );&#10;&#10;                        adapter.setViewBinder((view, data1, text) -&gt; {&#10;                            if (view.getId() == R.id.itemImage) {&#10;                                String url = (String) data1;&#10;                                Picasso.get().load(url).into((ImageView) view);&#10;                                return true;&#10;                            }&#10;                            return false;&#10;                        });&#10;&#10;                        workoutListView.setAdapter(adapter);&#10;&#10;                        Toast.makeText(&#10;                                DashboardActivity.this,&#10;                                &quot;Učitano: &quot; + excerciseList.size() + &quot; vježbi&quot;,&#10;                                Toast.LENGTH_LONG&#10;                        ).show();&#10;                        workoutProgress.setVisibility(View.INVISIBLE);&#10;                    }&#10;&#10;                    @Override&#10;                    public void onFailure(Call&lt;List&lt;Excercise&gt;&gt; call, Throwable t) {&#10;                        Log.e(&quot;DashboardActivity&quot;, &quot;API call failed&quot;, t);&#10;                        Toast.makeText(&#10;                                DashboardActivity.this,&#10;                                &quot;Greška pri učitavanju vježbi: &quot; + t.getMessage(),&#10;                                Toast.LENGTH_LONG&#10;                        ).show();&#10;                        workoutProgress.setVisibility(View.INVISIBLE);&#10;                    }&#10;            });&#10;    }&#10;&#10;    private void initViews() {&#10;        logoutBtn = findViewById(R.id.logoutBtn);&#10;        addExcerciseBtn = findViewById(R.id.addNewExcerciseBtn);&#10;        workoutProgress = findViewById(R.id.workoutProgress);&#10;        workoutListView = findViewById(R.id.workoutListView);&#10;    }&#10;&#10;    private void setupListeners() {&#10;        logoutBtn.setOnClickListener(v -&gt; {&#10;            authManager.logout();&#10;            startActivity(&#10;                    new Intent(&#10;                            this,&#10;                            LoginActivity.class&#10;                    )&#10;            );&#10;        });&#10;&#10;        addExcerciseBtn.setOnClickListener(v -&gt; {&#10;            startActivity(&#10;                    new Intent(&#10;                            this,&#10;                            ExcerciseActivity.class&#10;                    )&#10;            );&#10;        });&#10;    }&#10;}" />
              <option name="updatedContent" value="package ba.sum.fsre.fitness.activities;&#10;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.util.Log;&#10;import android.view.View;&#10;import android.widget.Button;&#10;import android.widget.ImageView;&#10;import android.widget.ListView;&#10;import android.widget.ProgressBar;&#10;import android.widget.SimpleAdapter;&#10;import android.widget.Toast;&#10;&#10;import com.squareup.picasso.Picasso;&#10;&#10;import java.util.ArrayList;&#10;import java.util.HashMap;&#10;import java.util.List;&#10;&#10;import ba.sum.fsre.fitness.R;&#10;import ba.sum.fsre.fitness.api.RetrofitClient;&#10;import ba.sum.fsre.fitness.models.Excercise;&#10;import ba.sum.fsre.fitness.utils.AuthManager;&#10;import retrofit2.Call;&#10;import retrofit2.Callback;&#10;import retrofit2.Response;&#10;&#10;public class DashboardActivity extends AppCompatActivity {&#10;&#10;    AuthManager authManager;&#10;    Button logoutBtn;&#10;    Button addExcerciseBtn;&#10;&#10;    ProgressBar workoutProgress;&#10;&#10;    ListView workoutListView;&#10;&#10;    // Globalna lista vježbi - potrebna za klik na stavku&#10;    private List&lt;Excercise&gt; globalExerciseList = new ArrayList&lt;&gt;();&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_dashboard);&#10;&#10;        authManager = new AuthManager(this);&#10;&#10;        // initialize UI first so buttons are ready even if network is slow&#10;        initViews();&#10;        setupListeners();&#10;&#10;        // Prvo punjenje liste vježbi&#10;        fetchExercises();&#10;    }&#10;&#10;    // Metoda za dohvaćanje vježbi - može se pozivati više puta&#10;    private void fetchExercises() {&#10;        this.workoutProgress.setVisibility(View.VISIBLE);&#10;&#10;        // Use Bearer &lt;token&gt; for Authorization (Supabase expects Bearer token)&#10;        String rawToken = authManager.getToken();&#10;        String token = rawToken != null ? &quot;Bearer &quot; + rawToken : null;&#10;&#10;        Log.d(&quot;DashboardActivity&quot;, &quot;Using token: &quot; + (rawToken != null ? &quot;[REDACTED]&quot; : &quot;null&quot;));&#10;&#10;        if (token == null) {&#10;            Toast.makeText(DashboardActivity.this, &quot;Niste prijavljeni. Prijavite se ponovo.&quot;, Toast.LENGTH_LONG).show();&#10;            this.workoutProgress.setVisibility(View.INVISIBLE);&#10;            return;&#10;        }&#10;&#10;        RetrofitClient&#10;            .getInstance()&#10;            .getApi()&#10;            .getAll(token).enqueue(new Callback&lt;List&lt;Excercise&gt;&gt;() {&#10;                    @Override&#10;                    public void onResponse(Call&lt;List&lt;Excercise&gt;&gt; call, Response&lt;List&lt;Excercise&gt;&gt; response) {&#10;                        Log.d(&quot;DashboardActivity&quot;, &quot;API onResponse code=&quot; + response.code());&#10;&#10;                        if (!response.isSuccessful()) {&#10;                            String err = &quot;Server error: &quot; + response.code();&#10;                            try {&#10;                                if (response.errorBody() != null) err += &quot; - &quot; + response.errorBody().string();&#10;                            } catch (Exception ex) {&#10;                                Log.e(&quot;DashboardActivity&quot;, &quot;Error reading errorBody&quot;, ex);&#10;                            }&#10;                            Toast.makeText(DashboardActivity.this, err, Toast.LENGTH_LONG).show();&#10;                            workoutProgress.setVisibility(View.INVISIBLE);&#10;                            return;&#10;                        }&#10;&#10;                        List&lt;Excercise&gt; excerciseList = response.body();&#10;                        if (excerciseList == null) {&#10;                            Toast.makeText(DashboardActivity.this, &quot;Nema podataka (response body je null)&quot;, Toast.LENGTH_LONG).show();&#10;                            workoutProgress.setVisibility(View.INVISIBLE);&#10;                            return;&#10;                        }&#10;&#10;                        // Spremamo u globalnu listu&#10;                        globalExerciseList = excerciseList;&#10;&#10;                        List&lt;HashMap&lt;String, String&gt;&gt; data = new ArrayList&lt;&gt;();&#10;&#10;                        for (Excercise e : excerciseList) {&#10;                            HashMap&lt;String, String&gt; item = new HashMap&lt;&gt;();&#10;                            item.put(&quot;name&quot;, e.getName());&#10;                            item.put(&quot;description&quot;, e.getDescription());&#10;                            item.put(&quot;image&quot;, e.getImageUrl());&#10;                            data.add(item);&#10;                        }&#10;&#10;                        String [] from = {&quot;name&quot;, &quot;description&quot;, &quot;image&quot;};&#10;                        int [] to = {R.id.textView2, R.id.textView3, R.id.itemImage};&#10;&#10;                        SimpleAdapter adapter = new SimpleAdapter(&#10;                                DashboardActivity.this,&#10;                                data, R.layout.listview_item,&#10;                                from, to&#10;                        );&#10;&#10;                        adapter.setViewBinder((view, data1, text) -&gt; {&#10;                            if (view.getId() == R.id.itemImage) {&#10;                                String url = (String) data1;&#10;                                Picasso.get().load(url).into((ImageView) view);&#10;                                return true;&#10;                            }&#10;                            return false;&#10;                        });&#10;&#10;                        workoutListView.setAdapter(adapter);&#10;&#10;                        Toast.makeText(&#10;                                DashboardActivity.this,&#10;                                &quot;Učitano: &quot; + excerciseList.size() + &quot; vježbi&quot;,&#10;                                Toast.LENGTH_LONG&#10;                        ).show();&#10;                        workoutProgress.setVisibility(View.INVISIBLE);&#10;                    }&#10;&#10;                    @Override&#10;                    public void onFailure(Call&lt;List&lt;Excercise&gt;&gt; call, Throwable t) {&#10;                        Log.e(&quot;DashboardActivity&quot;, &quot;API call failed&quot;, t);&#10;                        Toast.makeText(&#10;                                DashboardActivity.this,&#10;                                &quot;Greška pri učitavanju vježbi: &quot; + t.getMessage(),&#10;                                Toast.LENGTH_LONG&#10;                        ).show();&#10;                        workoutProgress.setVisibility(View.INVISIBLE);&#10;                    }&#10;            });&#10;    }&#10;&#10;    @Override&#10;    protected void onResume() {&#10;        super.onResume();&#10;        // Osvježi listu čim se vratimo na ovaj ekran!&#10;        fetchExercises();&#10;    }&#10;&#10;    private void initViews() {&#10;        logoutBtn = findViewById(R.id.logoutBtn);&#10;        addExcerciseBtn = findViewById(R.id.addNewExcerciseBtn);&#10;        workoutProgress = findViewById(R.id.workoutProgress);&#10;        workoutListView = findViewById(R.id.workoutListView);&#10;    }&#10;&#10;    private void setupListeners() {&#10;        logoutBtn.setOnClickListener(v -&gt; {&#10;            authManager.logout();&#10;            startActivity(&#10;                    new Intent(&#10;                            this,&#10;                            LoginActivity.class&#10;                    )&#10;            );&#10;        });&#10;&#10;        addExcerciseBtn.setOnClickListener(v -&gt; {&#10;            startActivity(&#10;                    new Intent(&#10;                            this,&#10;                            ExcerciseActivity.class&#10;                    )&#10;            );&#10;        });&#10;&#10;        // Postavljanje klika na stavku liste&#10;        workoutListView.setOnItemClickListener((parent, view, position, id) -&gt; {&#10;            // Dohvaćamo odabranu vježbu iz globalne liste&#10;            Excercise selected = globalExerciseList.get(position);&#10;            &#10;            // Kreiramo Intent za prelazak na EditExerciseActivity&#10;            Intent intent = new Intent(DashboardActivity.this, EditExerciseActivity.class);&#10;            &#10;            // Šaljemo podatke na novi ekran&#10;            intent.putExtra(&quot;id&quot;, String.valueOf(selected.getId()));&#10;            intent.putExtra(&quot;name&quot;, selected.getName());&#10;            intent.putExtra(&quot;desc&quot;, selected.getDescription());&#10;            intent.putExtra(&quot;image&quot;, selected.getImageUrl());&#10;            &#10;            startActivity(intent);&#10;        });&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/activity_edit_exercise.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/activity_edit_exercise.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:orientation=&quot;vertical&quot;&#10;    android:padding=&quot;24dp&quot;&#10;    android:gravity=&quot;center_horizontal&quot;&gt;&#10;&#10;    &lt;TextView&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Uredi vježbu&quot;&#10;        android:textSize=&quot;24sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        android:layout_marginBottom=&quot;32dp&quot;/&gt;&#10;&#10;    &lt;EditText&#10;        android:id=&quot;@+id/editName&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:hint=&quot;Naziv vježbe&quot;&#10;        android:minHeight=&quot;48dp&quot;/&gt;&#10;&#10;    &lt;EditText&#10;        android:id=&quot;@+id/editDesc&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:hint=&quot;Opis vježbe&quot;&#10;        android:minHeight=&quot;48dp&quot;&#10;        android:layout_marginBottom=&quot;24dp&quot;/&gt;&#10;&#10;    &lt;Button&#10;        android:id=&quot;@+id/btnSave&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Spremi promjene&quot;/&gt;&#10;&#10;    &lt;Button&#10;        android:id=&quot;@+id/btnDelete&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Obriši vježbu&quot;&#10;        android:backgroundTint=&quot;#D32F2F&quot;&#10;        android:textColor=&quot;#FFFFFF&quot;/&gt;&#10;&lt;/LinearLayout&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>